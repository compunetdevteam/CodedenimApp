@using CodedenimWebApp.Models
@model IEnumerable<CodeninModel.Course>

@{
    ViewBag.Title = "Courses";
    ViewBag.Courses = "class = active";
    Layout = "~/Views/Shared/_DashboardLayout.cshtml";
  

}
@*<link href="~/Content/DataTables/css/jquery.dataTables.min.css" rel="stylesheet" />*@
<link href="~/Content/DataTables/css/dataTables.bootstrap.css" rel="stylesheet" />
    <h2>Courses</h2>  


@using(Html.BeginForm("ExcelUpload", "Courses", FormMethod.Post, new {enctype = "multipart/form-data"}))
{   
    @Html.AntiForgeryToken()
    <input class="form-control" type="file" id="File" name="excelfile" class="btn btn-default btn-md" />

    <input type="submit" value="submit">
  
}
    <button type="button" class="btn btn-default btn-md" data-toggle="modal" data-url="@Url.Action("CreateCoursePartial","Courses")" id="btnCreateAsset">  
        <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span> Create Course 
    </button> 
    <br /><br />
    <div class="table-responsive" style="width: 99%; margin: 0 auto">
    <table id="Jdatatable" class="table table-striped table-hover" >
        <thead>
        <tr>
            <th>Category Name</th>
            <th>Course Code</th>
            <th>Course Name</th>
            <th>Course Description</th>
            <th>Expected Time</th>
            <th>Date Added</th>
            <th>Points</th>
            <th>Action</th>

        </tr>
        </thead>
    </table>
    </div> 
    <div class="modal fade" id="createAssetModal" tabindex="-1" role="dialog" aria-labelledby="CreateAssetModal" aria-hidden="true" data-backdrop="static" >

        <div id="createAssetContainer">

        </div>

    </div>
    <script src="~/Scripts/jquery-3.1.1.js"></script>
    <script src="~/Scripts/DataTables/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/DataTables/dataTables.bootstrap4.js"></script>
    <script type="text/javascript">
        window.oTable = $("#Jdatatable").DataTable({
            "processing": true, // for show progress bar while loading
            "serverSide": true, // if it is true the preocess is done on server side
            "filter": true, // disables search box
            "info": true,
            "stateSave": true,
            "orderMulti": false, // disable multiple column loading at once
            "ajax": {
                "url": "/Courses/GetIndex",
                "type": "POST",
                "datatype": "json"
            },
            "columns": [
                
                { "data": "CourseId", "autoWidth": true },
                { "data": "CourseCode", "autoWidth": true },
                { "data": "CourseName", "autoWidth": true },
                { "data": "CourseDescription", "autoWidth": true },
                { "data": "ExpectedTime", "autoWidth": true },
                { "data": "DateAdded", "autoWidth": true },
                { "data": "Points", "autoWidth": true },
          

                {
                    "data": "CourseId",
                    "autoWidth": true,
                    "render": function (data) {
                        return '<a href="#" onclick="Edit(' + data + ')" ><i class="fa fa-pencil" aria-hidden="true" ><i/></a>' +
                            '<a class="text-danger" href="#" onclick="Delete(' + data + ')" ><i class="fa fa-remove" aria-hidden="true" ><i/></a>';
                    }
                }
            
            ]
        });

        // });


        $("#btnCreateAsset").on("click", function () {

            var url = $(this).data("url");

            $.get(url, function (data) {
                $('#createAssetContainer').html(data);

                $('#createAssetModal').modal('show');
            });

        });
    </script>
 
